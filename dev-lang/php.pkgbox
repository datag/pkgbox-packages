# pkgbox: PHP
PKGBOX_API=1

# FAQ Installation: http://www.php.net/manual/en/faq.installation.php
# Install on UNIX / Apache2: http://php.net/manual/en/install.unix.apache2.php
# List of core configure options: http://php.net/manual/en/configure.about.php
# Configure script (trunk): http://svn.php.net/viewvc/php/php-src/trunk/configure.in?view=markup

pkgVer 5.4.12

DESCRIPTION="The PHP language runtime engine"
HOMEPAGE="http://php.net/"
SRC_URI="http://de3.php.net/get/${P}.tar.bz2/from/this/mirror?dummy=/${P}.tar.bz2"
SCM_URI="http://git.php.net/repository/php-src.git"
FEATURES=(
	"layout=GNU"
	"-apxs=${O[prefix]}/bin/apxs"	# build Apache2 module; path to APXS tool
	"cgi"							# FastCGI
	"php:config-file-path=${O[prefix]}/etc/php"				# path to php.ini
	"php:config-file-scan-dir=${O[prefix]}/etc/php/conf.d"	# additional config files
	"mysql:socket=/var/run/mysqld/mysqld.sock"
	"cli"							# Support for CLI
)


src_configure() {
	pkgConfigure \
		$(pkgWith layout) \
		$(pkgWith apxs apxs2) \
		$(pkgEnable cgi) \
		$(pkgWith php:config-file-path config-file-path -omitempty) \
		$(pkgWith php:config-file-scan-dir config-file-scan-dir -omitempty) \
		--disable-debug \
		--enable-mbstring \
		--with-regex=php \
		--with-pcre-regex \
		--with-pic \
		--enable-calendar \
		--enable-sysvsem \
		--enable-sysvshm \
		--enable-sysvmsg \
		--enable-shmop \
		--enable-bcmath \
		--with-bz2 \
		--enable-ctype \
		--with-iconv \
		--enable-ftp \
		--with-gettext \
		--enable-sockets \
		--enable-wddx \
		--with-libxml-dir=/usr \
		--with-xsl=/usr \
		--with-zlib=/usr \
		--with-openssl=/usr \
		--enable-zip \
		--with-mhash=yes \
		--without-mm \
		--with-curl \
		--with-zlib-dir \
		--with-gd \
		--enable-gd-native-ttf \
		--with-freetype-dir=/usr \
		--with-jpeg-dir=/usr \
		--with-png-dir=/usr \
		--enable-exif \
		--with-mysql=mysqlnd \
		--with-mysqli=mysqlnd \
		--with-sqlite3 \
		--enable-pdo \
		--with-pdo-mysql=mysqlnd \
		--with-pdo-sqlite \
		$(pkgWith mysql:socket mysql-sock -omitempty) \
		$(pkgEnable cli) \
		--with-readline
		
		#--disable-rpath \
		#--disable-static \
		
		#	--enable-intl \
		#	--with-mcrypt \
		#	--with-pspell=/usr \
		#	--with-recode=/usr \
		#	--with-gmp=/usr \
		#	--with-kerberos=/usr \
		#	--with-db4 \
		#	--without-gdbm \
		#	--enable-soap \
		#	--with-exec-dir=/usr/lib/php5/libexec \
		#	--with-enchant=/usr \
		#	--with-xpm-dir=/usr/X11R6 \
		#	--with-t1lib=/usr \
		#	--with-ldap=/usr \
		#	--with-ldap-sasl=/usr \
		#	--with-unixODBC=/usr \
		#	--with-snmp=/usr \
		#	--with-sqlite=/usr \
		#	--with-mssql=/usr \
		#	--with-tidy=/usr \
		#	--with-xmlrpc=shared \
		#	--with-pgsql=/usr PGSQL_INCLUDE=`pg_config --includedir` \
		#	--without-pdo-dblib \
		#	--with-pdo-odbc=unixODBC,/usr \
		#	--with-pdo-pgsql=/usr/bin/pg_config \
		#	--with-pdo-dblib=/usr \
}

